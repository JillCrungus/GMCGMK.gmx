<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Main setup
//3D Setup
d3d_start()
d3d_set_culling(1)
d3d_set_hidden(1)

randomize()

t = background_get_texture(bac_texture);//Main texture

//Lighting System setup
LS_create()//This initializes required variables
LS_set_ambience(make_colour_rgb(0,0,25))//Sets the ambient color
LS_set_point_light(0,16,32,8,32,c_white)//Creates a point light a makes it white

LS_set_directional_light(0,-0.5,0.5,0.5,c_red)//Creates a red directional light
LS_set_fog(0,c_white,0,256)

L = 1;//Variable for number of lights
a = 0;//Angle around scene
d = 32;//Distace from scene center
z = 16;//Variable for z axis position
c = make_colour_hsv(irandom(255),irandom(255),irandom(155)+100);//Next light color
r = irandom(192)+64;//Next light radius
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="32">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Add light
LS_set_point_light(L,x,y,z,r,c)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw FPS, number of lights and controls
draw_text(16,8,"FPS:"+string(fps_real))
draw_text(16,24,string(L)+" Lights in the scene")
draw_text(16,40,"Arrow keys to move")
draw_text(16,64,"Space bar to add lights (8 max)")
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw scene
z += -(keyboard_check(vk_pagedown)-keyboard_check(vk_pageup))*0.5;
a += -(keyboard_check(vk_right)-keyboard_check(vk_left));//Rotate view variable
d = max(d+(keyboard_check(vk_down)-keyboard_check(vk_up)),8);//Distance variable

//Set camera position
x = dcos(a)*d+16;
y = dsin(a)*d+16;

d3d_set_projection(x,y,z,16,16,8,0,0,1)//Set up view
draw_set_colour(c_white)

//Apply lighting and draw
LS_set_nearest(x,y,z)
LS_set_lighting(1)
d3d_draw_cone(24,0,0,32,8,8,t,2,1,1,4)
d3d_draw_block(0,0,-16,32,32,0,t,4,4)
d3d_draw_ellipsoid(8,8,8,24,24,24,t,4,4,32)
d3d_transform_add_scaling(dcos(current_time/20)*0.2+0.8,dcos(current_time/20)*0.2+0.8,dcos(current_time/20)*0.2+0.8)
d3d_transform_set_rotation_z(current_time/50)
d3d_transform_add_translation(5,25,0)
d3d_draw_cylinder(-5,-5,0,5,5,10,t,2,1,1,6)
d3d_transform_set_identity()
LS_set_lighting(0)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="27">
      <action>
        <libid>1</libid>
        <id>332</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_end_game</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
    <event eventtype="10" enumb="32">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Place light
L++;
c = make_colour_hsv(irandom(255),irandom(255),irandom(155)+100);//Next light color
r = irandom(192)+64;//Next light radius
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
